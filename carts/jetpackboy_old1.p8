pico-8 cartridge // http://www.pico-8.com
version 16
__lua__

score=0
spawn_enemy=0

function _init()
	cls()
	lasers={}
	enemies={}
	player={
	x=10,
	y=2,
	dy=2,
	frame=0,
	d=2,
	draw=function(self)
		spr(self.frame, self.x, self.y)
	end,
	update=function(self)
		if btn(üÖæÔ∏è) then
			self.y -= self.dy
		else
			self.y += self.dy
		end
	
		if btn(‚ùé) then
		--shoot laser
			add(lasers, make_laser(self.x+3,self.y))
		--needs cool down time
			sfx(1)
		end
		self.d -= 1
		if self.d<0 then 

			self.frame += 1
			if self.frame > 1 then self.frame = 0 end
			self.d=4
		end

		if self.y > 120 then
			self.y = 120
		end
	end
	}

end

function _update()
	player:update()
	for laser in all(lasers) do
		laser:update()
		for enemy in all(enemies) do
			laser:check_for_collision(enemy)
		end
	end
	spawn_enemy += 1
	if spawn_enemy > 40 then
		add(enemies, make_enemy(136, rnd(122)))
		spawn_enemy = 0
	end
	for enemy in all(enemies) do
		enemy:update()		
	end
end

function _draw()
	cls()
	player:draw()
	for laser in all(lasers) do
		laser:draw()
	end
	for enemy in all(enemies) do
		enemy:draw()
	end
	print(score, 1, 1, 3)
end

function make_laser(x,y)
	--laser that shoots out of player
	local laser={
	x=x,
	y=y,
	dx=3,
	width=8;
	height=8;
	is_collided_horiz=false,
	is_collided_vert=false,
	draw=function(self)
		line(self.x, self.y, self.x+3, self.y, 10)
	end,
	update=function(self)
		self.x += self.dx
		
	end,
	check_for_collision=function(self, enemy)
		if self.x < enemy.x and enemy.x < self.x + self.width then is_collided_horiz = true else is_collided_horiz = false end
		if self.y < enemy.y and enemy.y < self.y + self.height then is_collided_vert = true else is_collided_vert = false end
		if is_collided_horiz and is_collided_vert then enemy.is_shot=true end
	end
	}
	return laser
end

function make_enemy(x,y)
	local enemy={
		x=x,
		y=y,
		dx=3,
		is_shot=false,
		draw=function(self)
			spr(8, self.x, self.y)
		end,
		update=function(self)
			self.x -= self.dx
			if self.is_shot == true then
				sfx(3)
				score = score + 100
				del(enemies, self)
			end
		end
	}
	return enemy
end


__gfx__
00077000000770000000a0000000000000000000000000006666666d888880007000000700111100000000000000000000000000444444444444444444444444
0007700000077000000aaa00000bb00000088000000cc0006666666d800080000700007001111110080000800000000000000000555555555555555555555555
005700000057000000aaaaa000bbbb0000887800007cc7000000088088088000007777001111161108800880000000000000000053b3b333b3bb333333b33b35
00777000007770000aaaaaaa0bb77bb0088778800cc77cc0000088880808000000878700111111610000000000000000000000003b333b333b333b333b333b33
075707000757070009aaaaa903bbbb30048788400dccccd000008888088800000087870011111111000000000000000000000000353333333b3333bb333b3335
0087000000970000009aaa90003bb3000048840000dccd0000000880808080000077770011111111000000000000000000000000b3b3b33b33b3bbb3b3b33b33
00707000007070000009a9000003300000044000000dd0006666666d08080000070000700111111000000000000000000000000053333b33bb333b33bbb33bb5
0700070007000700000090000000000000000000000000006666666d8000800070000007001111000000000000000000000000003b33b3b3bb3333333bbb3335
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000055333bb3b33b3b33b3b33b53
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000033b3333b33b3333b33333335
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000333333333333bb33333b3b3b
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005b333b333bbb33333b33bb35
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003b33333333b333b333b33b5b
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005bb3b33b3bb3bbbb3bb333bb
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003b33bb3bbb333bb333333b35
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003533b3bb3bbbb3333b33333b
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005bb33b33b3b3bb33bb3b3b53
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000033b3b33bb3b3333b33b3333b
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005333bb3bb333333333b33335
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003b333bb33b333bbb3b333b53
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b5b3333bb3333bb33bb3b333
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000053bb3b3bb3b333bb333b333b
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000033333bbb33333b333bb33b35
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005b0333030b3300303b0bb033
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07777777777777777777777777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07777777777777777777777777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07777777777777777777777777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07777777777777777777777777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07777777777777777777777777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07777777777777777777777777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000777777000000000000777000000000000000000000000000000000000000777000000000000000000000000000000000000000000000000000
00000000000000777777000000000000777000000000000000000000000000000000000000777000000000000000000000000000000000000000000000000000
00000000000000777777000000000000777000000000000000000000000000000000000000777000000000000000000000000000000000000000000000000000
00000000000000777777077777777770777000000000000000000000000000000000000000777000000000000000000000000000000000000000000000000000
00000000000000777777077777777770777777770777777777770777777777007777777770777007770000000000000000000000000000000000000000000000
00000000000000777777077777777770777777770777777777770777777777007777777770777077770000000000000000000000000000000000000000000000
00000000000000777777077700007770777777770777777777770777777777007777777770777777770000000000000000000000000000000000000000000000
00000000000000777777077777777770777000000777000007770777000777007770000000777777700000000000000000000000000000000000000000000000
07777777777777777777077777777770777000000777000007770777000777007770000000777777000000000000000000000000000000000000000000000000
07777777777777777777077777777770777000000777000007770777000777007770000000777770000000000000000000000000000000000000000000000000
07777777777777777777077700000000777000000777000007770777000777007770000000777777000000000000000000000000000000000000000000000000
07777777777777777777077700000000777000000777000007770777000777007770000000777777700000000000000000000000000000000000000000000000
07777777777777777777077777777770777777770777777777770777777777707777777770777777770000000000000000000000000000000000000000000000
07777777777777777770077777777770777777770777777777770777777777707777777770777077770000000000000000000000000000000000000000000000
07777777777777777770077777777770777777770777777777770777777777707777777770777007770000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000777000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000777000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000777000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07777777777777777700000000000000000000000777000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07777777777777777700000000000000000000000777000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07777777777777777700000000000000000000000777000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07777777777777777700000000000000000000000777000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07777777777777777700000000000000000000000777000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07777777777777777700000000000000000000000777000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07777770000077777700000000000000000000000777000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07777770000077777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07777770000077777700000000000000000000000777000000077700000000000000000000000000000000000000000000000000000000000000000000000000
07777770000077777700000000000000000000000777000000077700000000000000000000000000000000000000000000000000000000000000000000000000
07777770000077777700000000000000000000000777000000077700000000000000000000000000000000000000000000000000000000000000000000000000
07777770000077777700000000000000000000000777000000077700000000000000000000000000000000000000000000000000000000000000000000000000
07777770000077777700000000000000000000000777000000077700000000000000000000000000000000000000000000000000000000000000000000000000
07777770000077777700000000000000000000000777000000077700000000000000000000000000000000000000000000000000000000000000000000000000
07777777777777777777777770777777777777770777000000077700000000000000000000000000000000000000000000000000000000000000000000000000
07777777777777777777777770777777777777770777000000077700000000000000000000000000000000000000000000000000000000000000000000000000
07777777777777777777777770777777777777770777777777777700000000000000000000000000000000000000000000000000000000000000000000000000
07777777777777777777777770777000000007770777777777777700000000000000000000000000000000000000000000000000000000000000000000000000
07777777777777777777777770777000000007770777777777777700000000000000000000000000000000000000000000000000000000000000000000000000
07777777777777777777777770777000000007770000007770000000000000000000000000000000000000000000000000000000000000000000000000000000
07777770000000000007777770777000000007770000007770000000000000000000000000000000000000000000000000000000000000000000000000000000
07777770000000000007777770777000000007770000007770000000000000000000000000000000000000000000000000000000000000000000000000000000
07777770000000000007777770777000000007770000007770000000000000000000000000000000000000000000000000000000000000000000000000000000
07777770000000000007777770777000000007770000007770000000000000000000000000000000000000000000000000000000000000000000000000000000
07777777777777777777777770777000000007770000007770000000000000000000000000000000000000000000000000000000000000000000000000000000
07777777777777777777777770777000000007770000007770000000000000000000000000000000000000000000000000000000000000000000000000000000
07777777777777777777777770777000000007770000007770000000000000000000000000000000000000000000000000000000000000000000000000000000
07777777777777777777777770777777777777770000007770000000000000000000000000000000000000000000000000000000000000000000000000000000
07777777777777777777777770777777777777770000007770000000000000000000000000000000000000000000000000000000000000000000000000000000
07777777777777777777777770777777777777770000007770000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010ef2b3b0c00000000000000000000000000060608080000000000000000000000000000000000000000000000000008000c06060808000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000300000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000300000c0700c0700d0700f0701107013070160701a0701e0702307000000000002f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00030000252501b250152500e2500c2502c0002c0002b0002a0002900028000280002800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
01100101006500000000650136502f650186500000013650000000000000000000002f65000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
